{"version":3,"sources":["services/phonebook.js","components/PersonForm.js","components/Persons.js","components/Filter.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","exports","getAll","axios","get","then","response","data","add","newPerson","post","remove","id","delete","update","updatedPerson","put","PersonForm","persons","setPersons","setMessage","useState","newName","setNewName","newNumber","setNewNumber","value","onChange","event","target","type","onClick","preventDefault","nameExists","find","person","numExists","window","confirm","p","name","number","phonebookService","returnedPerson","map","setTimeout","catch","error","console","log","personObject","concat","useFilter","filter","toLowerCase","includes","Name","deletePerson","Persons","Filter","handleFilter","Notification","message","className","Header","text","App","setNewFilter","useEffect","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b0bb81db.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n\tconst request = axios.get(baseUrl)\n\treturn request.then(response => response.data)\n}\n\nconst add = newPerson => {\n\tconst request = axios.post(baseUrl, newPerson)\n\treturn request.then(response => response.data)\n}\n\nconst remove = id => {\n\tconst request = axios.delete(`${baseUrl}/${id}`)\n\treturn request.then(response => response.data)\n}\n\nconst update = (id, updatedPerson) => {\n\tconst request = axios.put(`${baseUrl}/${id}`, updatedPerson)\n\treturn request.then(response => response.data)\n}\n\nconst exports = { getAll, add, remove, update }\n\nexport default exports","import React, {useState} from 'react'\nimport phonebookService from '../services/phonebook'\n\nconst PersonForm = ({ persons, setPersons, setMessage }) => {\n\tconst [newName, setNewName] = useState('')\n\tconst [newNumber, setNewNumber] = useState('')\n  \n\tconst handleNewName = (event) => setNewName(event.target.value)\n\t\n\tconst handleNewNumber = (event) => setNewNumber(event.target.value)\n  \n\tconst addNewName = (event) => {\n\t  event.preventDefault()\n\t  const nameExists = persons.find((person) => person['name'] === newName)\n\t  const numExists = persons.find((person) => person['number'] === newNumber)\n  \n\t  if (!nameExists && !numExists) {\n\t\tconst personObject = {\n\t\t  name: newName,\n\t\t  number: newNumber\n\t\t}\n\t\tphonebookService\n\t\t\t.add(personObject)\n\t\t\t.then(returnedPerson => {\n\t\t\t\tsetPersons(persons.concat(returnedPerson))\n\t\t\t\tsetNewName('')\n\t\t\t\tsetNewNumber('')\n\t\t\t\tsetMessage( () => ({\n\t\t\t\t\t\"message\": `Added ${newName} to phonebook`,\n\t\t\t\t\t\"type\": \"message\"\n\t\t\t\t}));\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetMessage(null)\n\t\t\t\t}, 5000)\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tsetMessage( () => ({\n\t\t\t\t\t\"message\": error.response.data.error,\n\t\t\t\t\t\"type\": \"error\"\n\t\t\t\t}));\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetMessage(null)\n\t\t\t\t}, 5000)\n\t\t\t\tconsole.log('err: ', error.response.data);\n\t\t\t})\n\t  }\n\t  else if (nameExists && window.confirm(`${newName} is already added to phonebook, replace the old number with the new one?`)) {\n\t\tconst person = persons.find(p => p.name === newName)\n\t\tconst id = person.id\n\t\tconst updatedPerson = { ...person, number: newNumber }\n\t\t\n\t\tphonebookService\n\t\t\t  .update(id, updatedPerson)\n\t\t\t  .then(returnedPerson => {\n\t\t\t\tsetPersons(persons.map(person => person.id !== id ? person : returnedPerson))\n\t\t\t\tsetNewName('')\n\t\t\t\tsetNewNumber('')\n\t\t\t\tsetMessage( () => ({\n\t\t\t\t\t\"message\": `Updated phone number of ${newName}`,\n\t\t\t\t\t\"type\": \"message\"\n\t\t\t\t}));\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetMessage(null)\n\t\t\t\t}, 5000)\n\t\t\t  })\n\t\t\t  .catch(error => {\n\t\t\t\tsetMessage( () => ({\n\t\t\t\t\t\"message\": error.response.data.error,\n\t\t\t\t\t\"type\": \"error\"\n\t\t\t\t}));\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetMessage(null)\n\t\t\t\t}, 5000)\n\t\t\t\tconsole.log(error.response.data);\n\t\t\t\t\n\t\t\t  })\n\t  } \n\t  else\n\t  \tsetMessage( () => ({\n\t\t\t\"message\": `${newName} is already added to the phone book`,\n\t\t\t\"type\": \"message\"\n\t\t}));\n\t}\n  \n\treturn (\n\t  <form>\n\t\t<div>name: <input value={newName} onChange={handleNewName} /></div>\n\t\t<div>number: <input value={newNumber} onChange={handleNewNumber} /></div>\n\t\t<div><button type=\"submit\" onClick={addNewName}>add</button></div>\n\t  </form>\n\t)\n}\n\nexport default PersonForm","import React from 'react'\n\nconst useFilter = (persons, filter) => {\n\tconst filtered = persons.filter(person => person['name'].toLowerCase().includes(filter.toLowerCase()))\n\treturn filtered\n}\n\nconst Name = ({ person, deletePerson }) => {\n\treturn (\n\t  <div>{person.name} {person.number} <button onClick={deletePerson}>delete</button></div>\n\t)\n}\n  \nconst Persons = ({ persons, filter, deletePerson }) => {\n\treturn (\n\t  <>\n\t\t{useFilter(persons, filter).map(person =>\n\t\t  <Name key={person.name} person={person} deletePerson={() => deletePerson(person.id)} />\n\t\t)}\n\t  </>\n\t)\n}\n\nexport default Persons","import React from 'react'\n\nconst Filter = ({ filter, handleFilter }) => {\n\treturn (\n\t  <div>filter shown with <input value={filter} onChange={handleFilter} /></div>\n\t)\n}\n\nexport default Filter","import React from 'react'\n\nconst Notification = ({ message }) => {\n\tif (message === null) {\n\t  return null\n  }\n    return (\n      <div className={message.type}>\n      {message.message}\n      </div>\n    )\n}\n\nexport default Notification","import React, { useEffect, useState } from 'react'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport Notification from './components/Notification'\nimport phonebookService from './services/phonebook'\n\nconst Header = ({ text }) => <><h1>{text}</h1></>\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [filter, setNewFilter] = useState('')\n  const [message, setMessage] = useState(null)\n\n  useEffect(() => {\n    phonebookService\n      .getAll()\n      .then(persons => {\n        setPersons(persons)\n      })\n  }, [])\n\n  const handleFilter = (event) => setNewFilter(event.target.value)\n\n  const deletePerson = (id) => {\n    const person = persons.find(p => p.id === id)\n    \n    if (window.confirm(`Delete ${person.name} ?`)) {\n      phonebookService\n      .remove(id)\n      .then(returnedPerson => {\n        setPersons(persons.filter(p => p.id !== id))        \n        setMessage( () => ({\n          \"message\": `${person.name} deleted from phone book`,\n          \"type\": \"message\"\n        }));\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetMessage(null)\n\t\t\t\t}, 5000)\n      })\n      .catch(error => {\n        setMessage( () => ({\n          \"message\": `Failed to delete ${person.name} from phone book`,\n          \"type\": \"error\"\n        }));\n      })\n    }\n  }\n\n  return (\n    <div>\n      <Header text='Phonebook' />\n      <Notification message={message} />\n      <Filter filter={filter} handleFilter={handleFilter} />\n      <Header text='add a new' />\n      <PersonForm persons={persons} setPersons={setPersons} setMessage={setMessage} />\n      <Header text='Numbers' />\n      <Persons persons={persons} filter={filter} deletePerson={deletePerson} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}