(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t(1),c=t(15),u=t.n(c),a=t(3),s=t(6),i=t(4),d=t.n(i),l="/api/persons",f={getAll:function(){return d.a.get(l).then((function(e){return e.data}))},add:function(e){return d.a.post(l,e).then((function(e){return e.data}))},remove:function(e){return d.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return d.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))}},j=function(e){var n=e.persons,t=e.setPersons,c=e.setMessage,u=Object(o.useState)(""),i=Object(a.a)(u,2),d=i[0],l=i[1],j=Object(o.useState)(""),b=Object(a.a)(j,2),m=b[0],h=b[1];return Object(r.jsxs)("form",{children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:d,onChange:function(e){return l(e.target.value)}})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:m,onChange:function(e){return h(e.target.value)}})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();var r=n.find((function(e){return e.name===d})),o=n.find((function(e){return e.number===m}));if(r||o)if(r&&window.confirm("".concat(d," is already added to phonebook, replace the old number with the new one?"))){var u=n.find((function(e){return e.name===d})),a=u.id,i=Object(s.a)(Object(s.a)({},u),{},{number:m});f.update(a,i).then((function(e){t(n.map((function(n){return n.id!==a?n:e}))),l(""),h(""),c((function(){return{message:"Updated phone number of ".concat(d),type:"message"}})),setTimeout((function(){c(null)}),5e3)})).catch((function(e){c((function(){return{message:e.response.data.error,type:"error"}})),setTimeout((function(){c(null)}),5e3),console.log(e.response.data)}))}else c((function(){return{message:"".concat(d," is already added to the phone book"),type:"message"}}));else{var j={name:d,number:m};f.add(j).then((function(e){t(n.concat(e)),l(""),h(""),c((function(){return{message:"Added ".concat(d," to phonebook"),type:"message"}})),setTimeout((function(){c(null)}),5e3)})).catch((function(e){c((function(){return{message:e.response.data.error,type:"error"}})),setTimeout((function(){c(null)}),5e3),console.log("err: ",e.response.data)}))}},children:"add"})})]})},b=function(e,n){return e.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}))},m=function(e){var n=e.person,t=e.deletePerson;return Object(r.jsxs)("div",{children:[n.name," ",n.number," ",Object(r.jsx)("button",{onClick:t,children:"delete"})]})},h=function(e){var n=e.persons,t=e.filter,o=e.deletePerson;return Object(r.jsx)(r.Fragment,{children:b(n,t).map((function(e){return Object(r.jsx)(m,{person:e,deletePerson:function(){return o(e.id)}},e.name)}))})},p=function(e){var n=e.filter,t=e.handleFilter;return Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{value:n,onChange:t})]})},O=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{className:n.type,children:n.message})},g=function(e){var n=e.text;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("h1",{children:n})})},x=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],u=Object(o.useState)(""),s=Object(a.a)(u,2),i=s[0],d=s[1],l=Object(o.useState)(null),b=Object(a.a)(l,2),m=b[0],x=b[1];Object(o.useEffect)((function(){f.getAll().then((function(e){c(e)}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)(g,{text:"Phonebook"}),Object(r.jsx)(O,{message:m}),Object(r.jsx)(p,{filter:i,handleFilter:function(e){return d(e.target.value)}}),Object(r.jsx)(g,{text:"add a new"}),Object(r.jsx)(j,{persons:t,setPersons:c,setMessage:x}),Object(r.jsx)(g,{text:"Numbers"}),Object(r.jsx)(h,{persons:t,filter:i,deletePerson:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ?"))&&f.remove(e).then((function(r){c(t.filter((function(n){return n.id!==e}))),x((function(){return{message:"".concat(n.name," deleted from phone book"),type:"message"}})),setTimeout((function(){x(null)}),5e3)})).catch((function(e){x((function(){return{message:"Failed to delete ".concat(n.name," from phone book"),type:"error"}}))}))}})]})};t(38);u.a.render(Object(r.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.b0bb81db.chunk.js.map